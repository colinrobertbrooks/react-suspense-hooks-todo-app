{"version":3,"sources":["components/App.js","components/Root.js","index.js","utils/router.js","api/utils.js","utils/localStorage.js","api/data.js","api/index.js","contexts/TodoContext.js","utils/date.js","components/IsLoading.js"],"names":["TodoListPage","React","lazy","__webpack_require__","e","then","bind","TodoDetailsPage","TodoCreatePage","App","react_default","a","createElement","react","maxDuration","fallback","IsLoading","reactstrap_es","es","path","makeTo","Root","TodoContext","components_App","ReactDOM","createRoot","document","getElementById","render","components_Root","d","__webpack_exports__","pathname","concat","process","getTodosFromLocalStorage","todos","key","value","localStorage","getItem","JSON","parse","error","getLocalStorageValue","console","log","setTodosToLocalStorage","stringify","setItem","delay","ms","arguments","length","undefined","_ref","_ref$min","min","_ref$max","max","Math","floor","random","randomMs","Promise","resolve","setTimeout","initialTodos","id","v4","text","completed","createdAt","createdBy","updatedAt","updatedBy","api","list","_list","Object","asyncToGenerator","regenerator_default","mark","_callee","todosFromLocalStorage","wrap","_context","prev","next","abrupt","stop","this","apply","create","_create","_callee2","todo","date","newTodo","existingTodos","_context2","getDate","objectSpread","toConsumableArray","_x","delete","_delete2","_callee3","idxToDelete","_context3","findIndex","filter","idx","_x2","initialState","isLoading","createContext","TodoProvider","children","_useReducer","useReducer","state","action","type","payload","_useReducer2","slicedToArray","store","dispatch","getTodos","_ref2","sent","t0","useEffect","createTodo","_ref3","deleteTodo","_ref4","Provider","getTodoById","find","Consumer","formatDate","Date","getTime","toLocaleString","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_ref$message","message","className"],"mappings":"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","file":"static/js/main.d673de78.chunk.js","sourcesContent":["import React, { Suspense } from 'react';\nimport { Router } from '@reach/router';\nimport { Container } from 'reactstrap';\nimport IsLoading from './IsLoading';\nimport { makeTo } from '../utils/router';\n\nconst TodoListPage = React.lazy(() =>\n  import(/* webpackChunkName: 'TodoListPage' */ './pages/TodoListPage')\n);\nconst TodoDetailsPage = React.lazy(() =>\n  import(/* webpackChunkName: 'TodoDetailsPage' */ './pages/TodoDetailsPage')\n);\nconst TodoCreatePage = React.lazy(() =>\n  import(/* webpackChunkName: 'TodoCreatePage' */ './pages/TodoCreatePage')\n);\n\nfunction App() {\n  return (\n    <Suspense maxDuration={500} fallback={<IsLoading />}>\n      <Container>\n        <Router>\n          <TodoListPage path={makeTo('/')} />\n          <TodoDetailsPage path={makeTo('/details/:id')} />\n          <TodoCreatePage path={makeTo('/create')} />\n        </Router>\n      </Container>\n    </Suspense>\n  );\n}\n\nexport default App;\n","import React, { StrictMode } from 'react';\nimport { TodoProvider } from '../contexts/TodoContext';\nimport App from './App';\n// import UnsafeExample from './UnsafeExample';\n\nfunction Root() {\n  return (\n    <StrictMode>\n      <TodoProvider>\n        <App />\n      </TodoProvider>\n    </StrictMode>\n  );\n}\n\nexport default Root;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport Root from './components/Root';\nimport './index.css';\n\nReactDOM.createRoot(document.getElementById('root')).render(<Root />);\n","/* eslint-disable import/prefer-default-export */\nexport const makeTo = pathname => `${process.env.PUBLIC_URL}${pathname}`;\n","import { getLocalStorageValue, setLocalStorage } from '../utils/localStorage';\n\nconst LOCAL_STORAGE_KEY = 'TODOS';\n\nexport const getTodosFromLocalStorage = () => {\n  const todos = getLocalStorageValue(LOCAL_STORAGE_KEY);\n\n  if (todos) {\n    console.log('     - ðŸ“– `todos` read from local storage');\n    return JSON.parse(todos);\n  }\n\n  return null;\n};\n\nexport const setTodosToLocalStorage = todos => {\n  console.log('     - ðŸ–Šï¸ `todos` written to local storage');\n  setLocalStorage(LOCAL_STORAGE_KEY, JSON.stringify(todos));\n};\n\nconst randomMs = ({ min = 100, max = 1600 } = {}) =>\n  Math.floor(Math.random() * (max - min + 1) + min);\n\nexport const delay = (ms = randomMs()) => {\n  console.log(`     - â²ï¸ delay was ${ms} ms`);\n  return new Promise(resolve => setTimeout(resolve, ms));\n};\n","export const getLocalStorageValue = key => {\n  const value = localStorage.getItem(key);\n  if (!value) return null;\n  try {\n    return JSON.parse(value);\n  } catch (error) {\n    return null;\n  }\n};\n\nexport const setLocalStorage = (key, value) => {\n  localStorage.setItem(key, JSON.stringify(value));\n};\n","/* eslint-disable import/prefer-default-export */\nimport { v4 } from 'node-uuid';\n\nexport const initialTodos = [\n  {\n    id: v4(),\n    text: 'Try Suspense',\n    completed: true,\n    createdAt: 1541163993401,\n    createdBy: 'colin',\n    updatedAt: 1541163996938,\n    updatedBy: 'colin'\n  },\n  {\n    id: v4(),\n    text: 'Try Hooks',\n    completed: true,\n    createdAt: 1541163995178,\n    createdBy: 'colin',\n    updatedAt: 1541163996938,\n    updatedBy: 'colin'\n  },\n  {\n    id: v4(),\n    text: 'Profit',\n    completed: false,\n    createdAt: 1541163996071,\n    createdBy: 'colin',\n    updatedAt: 1541163996071,\n    updatedBy: 'colin'\n  }\n];\n","import { v4 } from 'node-uuid';\nimport {\n  getTodosFromLocalStorage,\n  setTodosToLocalStorage,\n  delay\n} from './utils';\nimport { initialTodos } from './data';\nimport { getDate } from '../utils/date';\n\nconst LOAD_INITIAL_TODOS_FROM_LOCAL_STORAGE = true;\nconst THROW_RANDOM_ERRORS = false;\n\nconst throwRandomError = () => {\n  const errors = ['ðŸ˜¢', 'ðŸ‘¹', 'ðŸ’©', 'ðŸ’£', 'ðŸ’€'];\n  if (Math.random() > 0.5) {\n    const randomError = errors[Math.floor(Math.random() * errors.length)];\n    throw new Error(randomError);\n  }\n};\n\nconst api = {\n  todos: {\n    async list() {\n      console.log('ðŸ“ž `api.todos.list` called:');\n      if (THROW_RANDOM_ERRORS) throwRandomError();\n      if (LOAD_INITIAL_TODOS_FROM_LOCAL_STORAGE) {\n        const todosFromLocalStorage = getTodosFromLocalStorage();\n        if (todosFromLocalStorage) {\n          return todosFromLocalStorage;\n        }\n      }\n      await delay();\n      setTodosToLocalStorage(initialTodos);\n      return initialTodos;\n    },\n    async create(todo) {\n      console.log(`ðŸ“ž api.todos.create called:`);\n      await delay(100);\n      if (THROW_RANDOM_ERRORS) throwRandomError();\n      const date = getDate();\n      const user = 'user'; // TODO\n      const newTodo = {\n        ...todo,\n        id: v4(),\n        createdAt: date,\n        createdBy: user,\n        updatedAt: date,\n        updatedBy: user\n      };\n      const existingTodos = getTodosFromLocalStorage();\n      setTodosToLocalStorage([...existingTodos, newTodo]);\n    },\n    async delete(id) {\n      console.log(`ðŸ“ž api.todos.delete called:`);\n      await delay(100);\n      if (THROW_RANDOM_ERRORS) throwRandomError();\n      const existingTodos = getTodosFromLocalStorage();\n      const idxToDelete = existingTodos.findIndex(todo => todo.id === id);\n      setTodosToLocalStorage(\n        existingTodos.filter((todo, idx) => idx !== idxToDelete)\n      );\n    }\n  }\n};\n\nexport default api;\n","import React, { useReducer, useEffect } from 'react';\n\nimport api from '../api';\n\nconst initialState = {\n  isLoading: true,\n  error: null,\n  todos: null\n};\n\nconst FETCH_TODO_LIST_SUCCESS = 'FETCH_TODO_LIST_SUCCESS';\nconst FETCH_TODO_LIST_ERROR = 'FETCH_TODO_LIST_ERROR';\n\nconst TodoContext = React.createContext(null);\n\nconst TodoProvider = ({ children }) => {\n  const [store, dispatch] = useReducer((state, action) => {\n    switch (action.type) {\n      case FETCH_TODO_LIST_SUCCESS:\n        return {\n          ...state,\n          isLoading: false,\n          error: null,\n          todos: action.payload.todos\n        };\n\n      case FETCH_TODO_LIST_ERROR:\n        return {\n          ...state,\n          isLoading: false,\n          error: action.payload.error,\n          todos: null\n        };\n\n      default:\n        return state;\n    }\n  }, initialState);\n\n  const getTodos = async () => {\n    try {\n      const todos = await api.todos.list();\n      dispatch({ type: FETCH_TODO_LIST_SUCCESS, payload: { todos } });\n    } catch (error) {\n      dispatch({ type: FETCH_TODO_LIST_ERROR, payload: { error } });\n    }\n  };\n\n  useEffect(() => {\n    getTodos();\n  }, []);\n\n  const getTodoById = id => {\n    const { todos } = store;\n\n    if (todos) {\n      return todos.find(todo => todo.id === id);\n    }\n\n    return null;\n  };\n\n  const createTodo = async todo => {\n    try {\n      await api.todos.create(todo);\n    } catch (error) {\n      throw error;\n    }\n\n    await getTodos();\n  };\n\n  const deleteTodo = async id => {\n    try {\n      await api.todos.delete(id);\n    } catch (error) {\n      throw error;\n    }\n\n    await getTodos();\n  };\n\n  return (\n    <TodoContext.Provider\n      value={{ ...store, getTodoById, createTodo, deleteTodo }}\n    >\n      {children}\n    </TodoContext.Provider>\n  );\n};\n\nconst TodoConsumer = TodoContext.Consumer;\n\nexport default TodoContext;\n\nexport { TodoProvider, TodoConsumer };\n","export const getDate = () => new Date().getTime();\n\nexport const formatDate = value => {\n  const dt = new Date(value);\n  return dt.toLocaleString();\n};\n","import React from 'react';\n\nconst IsLoading = ({ message = null }) => (\n  <p className=\"text-center text-muted\">{message || 'Loading...'}</p>\n);\n\nexport default IsLoading;\n"],"sourceRoot":""}